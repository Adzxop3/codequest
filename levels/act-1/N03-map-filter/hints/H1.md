# H1 - Map/Filter : Chaining Methods

## 💡 Concept Clé

Les méthodes `map()` et `filter()` retournent de nouveaux arrays, permettant un chaînage élégant pour transformer et filtrer les données.

## 🔧 Pattern de Base

```javascript
const users = [
  { name: 'Alice', age: 25, active: true },
  { name: 'Bob', age: 17, active: false },
  { name: 'Charlie', age: 30, active: true }
];

// ✅ Chaînage élégant
const result = users
  .filter(user => user.active)           // Garde les actifs
  .filter(user => user.age >= 18)        // Garde les majeurs
  .map(user => user.name.toUpperCase())  // Transform en majuscules
  .sort();                               // Trie par ordre alphabétique

console.log(result); // ['ALICE', 'CHARLIE']
```

## 🎯 Ordre Important

L'ordre des opérations affecte les performances :

```javascript
// ✅ Optimal : filter d'abord (réduit les éléments)
const result1 = items
  .filter(expensive_condition)  // Réduit le dataset
  .map(expensive_transform);     // Applique sur moins d'éléments

// ❌ Moins optimal
const result2 = items
  .map(expensive_transform)      // Transform TOUT
  .filter(expensive_condition);  // Puis filtre
```

## 🔍 Debug Tip

```javascript
// ✅ Debug avec des console.log intermédiaires
const result = users
  .filter(user => {
    console.log('Filtering:', user.name);
    return user.active;
  })
  .map(user => {
    console.log('Mapping:', user.name);
    return user.name.toUpperCase();
  });
```

## ⚠️ Piège : Mutation

```javascript
// ❌ Ne mutez pas dans map/filter
const bad = users.map(user => {
  user.processed = true; // MUTATION !
  return user;
});

// ✅ Créez de nouveaux objets
const good = users.map(user => ({
  ...user,
  processed: true
}));
```